@model List<MyOnlineClinic.Web.Models.AppointmentViewModel>
@{
    ViewBag.Title = "Index";
   // Layout = "~/Areas/Doctor/Views/Shared/_DoctorPartial.cshtml";
}
<script src="/scripts/jquery.plugin.js"></script>
<script src="/scripts/jquery.datepick.js"></script>
<link href="~/Scripts/jquery.datepick.css" rel="stylesheet" />


<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xs-offset-0 col-sm-offset-0 toppad" style="margin-top:0px;margin-left: -10px;">
    <div class="panel panel-info doctor">
        <div class="panel-heading">
            <h3 class="panel-title">My Past Consults</h3>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class=" col-md-11 col-lg-11" style="margin-left:42px;">
                    <div class="col-md-12 fifth layer" style="margin-top:5px;">
                        <div class="form-group">
                            <div class="col-md-12 col-sm-12 col-xs-12" style="text-align:center;">
                                <button type="submit" id="ContentPlaceHolder1_lnkToday" class="btn btn-success today">Today</button>
                                <button type="submit" id="ContentPlaceHolder1_lnkWeek" class="btn btn-success today">Week</button>
                                <button type="submit" id="ContentPlaceHolder1_lnkMonth" class="btn btn-success today">Month</button>
                                <button type="submit" id="ContentPlaceHolder1_lnkAll" class="btn btn-success today">All</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 fifth layer" style="margin-top:20px;">
                        <div class="col-md-3">
                            <input type="text" class="form-control" id="ContentPlaceHolder1_txtfrom" placeholder="From Date">
                        </div>
                        <div class="col-md-3">
                            <input type="text" class="form-control" id="ContentPlaceHolder1_txt_todate" placeholder="To Date">
                        </div>
                        <div class="col-md-3">
                            <select id="contentplaceholder1_dropdownlist1" class="form-control select">
                                <option>-Status Type-</option>
                                <option selected="selected" value="">All</option>
                                <option value="2">Completed</option>
                                <option value="4">Cancelled By Doctor</option>
                                <option value="5">Cancelled By Patient</option>
                                <option value="6">Rejected</option>
                                <option value="8">Cancel By Admin</option>
                                <option value="9">Not Completed</option>
                                <option value="10">Not Responded By Patient</option>
                                <option value="24">Seen</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <div class="col-md-3 pull-right" style="text-align:center;">
                                <button type="submit" id="ContentPlaceHolder1_Button2" class="btn btn-primary">Submit</button>
                                <button type="submit" id="ContentPlaceHolder1_Button3" class="btn btn-success">Reset</button>
                            </div>
                        </div>
                    </div>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab_default_1">
                            <div class="container-fluid">
                                <div class="row">
                                   @if (Model.Count != 0)
                                    {
                                        foreach (var item in Model)
                                        {
                                            <div class="col-md-12 future msg_li">
                                                <div class="col-md-6" style="margin-bottom:13px;">
                                                    <p><h3 class="Name">@item.PatientName</h3></p>
                                                    <p class="text">Has Requested An Appointment On @Convert.ToDateTime(item.AppointmentDateUtc).ToString("dd-MMM-yyyy hh:mm tt") </p>
                                                    <p class="text"><b>Status</b> : @item.AppointmentTypeText </p>
                                                    <a href="#" class="soap lnkSoap" data-id="@item.AppointmentId"><p class="text">Click On The Notes(SOAP)</p></a>
                                                    <button type="button" id="btnActivate" class="btn btn-primary" />
                                                </div>
                                            </div>
                                        }
                                    }
                                   else
                                   {
                                    <div class="col-md-12 future msg_li">
                                        Nil
                                    </div>
                                   }
                                </div>

                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

</div>




<div id="content-wrapper">
    @*<div class="dhe-example-section" id="ex-1-2">
        <div class="col-sm-12">
            <div class="from_title" style="margin-top:18px;">
                My Past Consults
            </div>
            <div class="patient_form_box futureConsults_bx">
                <div style="border: 1px solid #cdcdcd; float: none !important; margin: 1% auto; width: 97%;
                        clear: left; display: block; padding: 0.5%;" class="tr_box" align="center">
                    <div class="pastcal_bx2">
                        <a id="ContentPlaceHolder1_lnkToday" class="today_icon1 ">Today</a><a id="ContentPlaceHolder1_lnkWeek" class="w1_icon">
                            Week
                        </a><a id="ContentPlaceHolder1_lnkMonth" class="m1_icon">Month</a><a id="ContentPlaceHolder1_lnkAll" class="m3_icon active">
                            All
                        </a>
                    </div>
                    <div>
                        <div class="td_1" style="width: 85px !important;">
                            <span class="lbl_text">
                                From Date<span class="red"></span>:
                            </span>
                        </div>
                        <div class="input_box1" style="width: 100px; background: transparent none repeat scroll 0% 0%;
                                float: none ! important; display: inline-block;">
                            <input name="ctl00$ContentPlaceHolder1$txtfrom" type="text" id="ContentPlaceHolder1_txtfrom" class="text_input" onkeypress="return false;">

                        </div>
                        <div class="td_1" style="width: 85px !important;">
                            <span class="lbl_text">
                                <span class="lbl_text">
                                    To Date<span class="red"></span>:
                                </span>
                            </span>
                        </div>
                        <div class="input_box1" style="width: 100px; background: transparent none repeat scroll 0% 0%;
                                float: none ! important; display: inline-block;">
                            <input name="ctl00$ContentPlaceHolder1$txt_todate" type="text" id="ContentPlaceHolder1_txt_todate" class="text_input" onkeypress="return false;">

                        </div>
                        <div class="td_1" style="width: 98px !important;">
                            <span class="lbl_text">Status :</span>
                        </div>
                        <div class="input_box1" style="width: 100px; background: transparent none repeat scroll 0% 0%;
                                float: none ! important; display: inline-block;">
                            <div class="input_box1" style="width: 100px; background: transparent none repeat scroll 0% 0%;
                                    float: none ! important; display: inline-block;">
                                <select name="ctl00$ContentPlaceHolder1$DropDownList1" id="ContentPlaceHolder1_DropDownList1" class="text_input">
                                    <option selected="selected" value="">All</option>
                                    <option value="2">Completed</option>
                                    <option value="4">Cancelled By Doctor</option>
                                    <option value="5">Cancelled By Patient</option>
                                    <option value="6">Rejected</option>
                                    <option value="8">Cancel By Admin</option>
                                    <option value="9">Not Completed</option>
                                    <option value="10">Not Responded By Patient</option>
                                    <option value="24">Seen</option>

                                </select>
                            </div>
                        </div>
                        <div class="td_1">
                            <input type="submit" name="ctl00$ContentPlaceHolder1$Button2" value="Submit" id="ContentPlaceHolder1_Button2" class="cancel_btn_1" style="margin-left: 10px; margin-top: 3px; float: none">
                            <input type="submit" name="ctl00$ContentPlaceHolder1$Button3" value="Reset" id="ContentPlaceHolder1_Button3" class="cancel_btn_1" style="margin-left: 10px; margin-top: 3px; float: none">
                        </div>
                    </div>
                </div>
                <div class="msg_list" style="width: 98%; overflow-y: scroll; height: 480px;">
                    @if (Model.Count != 0)
                    {
                        foreach (var item in Model)
                        {
                            <div class="msg_li">
                                <div class="table-icons textstyle capitalize_first_letter" style="color: black; line-height: 29px; font-size: 14px;">

                                    <b>
                                        @item.PatientName <br />
                                        Has Requested An Appointment on  @Convert.ToDateTime(item.AppointmentDateUtc).ToString("dd-MMM-yyyy hh:mm tt")
                                        <br />
                                        Status: @item.AppointmentTypeText
                                    </b><br />
                                    <a id="link" class="lnkSoap" data-id="@item.AppointmentId"> Click On The Notes(SOAP)</a>
                                    <button type="button" id="btnActivate" class="btn btn-primary btn-sm" />
                                </div>
                            </div><br />
                        }
                    }
                    else
                    {
                        <div class="msg_li">
                            Nil
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>*@
</div>
<div class="modal fade" id="basicModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">

        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">
                    <label id="lblTitle">Soap Notes</label>
                </h4>
            </div>
            <div class="modal-body">
                <div id="CreateEditForm">

                    <table id="tblRadiology" class="table table-striped responsive-utilities jambo_table">
                        <thead>
                            <tr>
                                <th>Reason For Contact</th>
                                <th>Subjective </th>
                                <th>Objective</th>
                                <th>Assessment</th>
                                <th>Plans</th>
                                <th></th>

                            </tr>
                        </thead>
                        <tbody> </tbody>
                        @*<tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>*@

                    </table>

                </div>
                <input type="hidden" id="hdnIssoap" />
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Ok</button>
                </div>
            </div>
        </div>

        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<script src="/AdminAssets/js/jquery.min.js"></script>
<script src="/AdminAssets/js/bootstrap.min.js"></script>
<script>
   
     $(document).ready(function () {
        
         $('#ContentPlaceHolder1_txtfrom').datepick({ dateFormat: 'dd/mm/yyyy' });
         $('#ContentPlaceHolder1_txt_todate').datepick({ dateFormat: 'dd/mm/yyyy' });
     });



    $('.lnkSoap').click(function () {
        var hdnIssoap = document.getElementById('hdnIssoap');
        hdnIssoap.value = $(this).attr('data-id');
        $.ajax({
            type: "GET",
            url: '/doctor/DoctorPastConsult/SosapNotes',
            data: {

                AppointmentId: hdnIssoap.value
            },
            datatype: "json",
            success: function (data) {
                tr = $('<tr/>');
                tr.append("<td>" + data.ReasonForContact + "</td>");
                tr.append("<td>" + data.Subjective + "</td>");
                tr.append("<td>" + data.Objective + "</td>");
                tr.append("<td>" + data.Assessment + "</td>");
                tr.append("<td>" + data.Plans + "</td>");
               
                $('#tblRadiology').append(tr);
                var options = {
                    "backdrop": "static"
                };
                $('#basicModal').modal(options);

            },
            error: function () {

            }
        });
    });



</script>
