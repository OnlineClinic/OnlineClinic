@model List<MyOnlineClinic.Web.Models.VoucherViewModel>
@{
    ViewBag.Title = "VoucherAssign";
    Layout = "~/Areas/Clinic/Views/Shared/_ClinicLayout.cshtml";
}
<style>
    select {
        width: 100%;
        padding: 5px;
        line-height: normal;
    }

    span {
        border-style: none;
    }

    /*.dataTables_filter {
        display: none;
    }*/
</style>
@using JQueryUIHelpers;
<div id="msg"></div>
<div class="right_col" role="main">
    <div class="">
        @{MyOnlineClinic.Web.Models.SearchParametersViewModel objSearchModel = new MyOnlineClinic.Web.Models.SearchParametersViewModel();
        objSearchModel.FromDate = null;
        objSearchModel.ToDate = null;
        objSearchModel.UsedId = null;
    //objSearchModel.ActionName = "Index";
    //objSearchModel.ControllerName = "Organization";
    //objSearchModel.AreaName = "Admin";
    //objSearchModel.ShowOrganizationName = true;
    //objSearchModel.ShowCity = true;
    //objSearchModel.ShowCountry = true;
    //objSearchModel.ShowState = true;
    //objSearchModel.ShowOrgType = true;
    //objSearchModel.ShowEmail = true;
    //objSearchModel.PageTitle = "Organizations";
    //objSearchModel.ShowPostCode = true;
        }
        @Html.Partial("_PartialVoucherList", objSearchModel)
    </div>
    @*<div class="clearfix"></div>*@

    <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">
            <div class="x_panel">
                <div class="x_content">
                    <table id="example" class="table table-striped responsive-utilities jambo_table">
                        <thead>
                            <tr>
                                <th>No.</th>
                                <th>Voucher No</th>
                                <th>Generated By</th>
                                <th>Generated Date</th>
                                <th>Voucher Status</th>
                                <th>Assign Voucher(Patient)</th>
                                <th>Assign Voucher(Doctor)</th>
                                <th>Assign Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{ int count = 1;}
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>

                                        @count
                                    </td>
                                    <td>@item.VoucherNo</td>
                                    <td>@item.LoginName</td>
                                    <td>@item.GeneratedDate</td>
                                    <td>
                                        @item.voucherstatus
                                        @*@if (item.Status == 0)
                                            {
                                                <span>Not Used</span>
                                            }
                                            else
                                            {
                                                <span>Used</span>
                                            }*@
                                    </td>
                                    <td>
                                        @if (item.RoleType == 3)
                                        {
                                            <a href="#"><span>@item.UserName</span></a>
                                        }

                                        else if (item.RoleType != 2)
                                        {
                                            <a class="successbutton" href="/Clinic/Patient/Findpatient/@item.VoucherID" data-toggle="tooltip" data-placement="left">
                                                <span class="btn btn-success btn-round"> Assign Voucher</span>
                                            </a>

                                        }
                                    </td>
                                    <td>
                                        @if (item.RoleType == 2)
                                        {

                                            <a href="#"><span>@item.UserName</span></a>

                                        }
                                        else if (item.RoleType != 3)
                                        {
                                            <a class="successbutton" href="/Clinic/Doctor/DoctorList/@item.VoucherID" data-toggle="tooltip" data-placement="left">
                                                @*<img src="~/images/voucherAssign.jpg" height="30" width="80" />*@
                                                <span class="btn btn-success btn-round"> Assign Voucher</span>

                                            </a>
                                        }
                                    </td>
                                    <td>
                                        @item.AssignDate
                                    </td>
                                </tr>
                                        count = count + 1;
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <br />
        <br />
        <br />
    </div>
    @*@Html.Partial("_PartialVoucherList", Model)*@

</div>
@*</div>*@
<script src="~/AdminAssets/js/datatables/js/jquery.dataTables.js"></script>
<script>
    $(document).ready(function () {
        if ('@ViewBag.Errormessage' != '') {
            $('#FromDate').datepick({ dateFormat: 'dd/mm/yyyy' });
            $("#msg").append("<div class='alert alert-danger'><p>" + '@ViewBag.Errormessage' + "</p></div>").delaye(5000).fade();
        }
        var oTable = $('#example').dataTable({
            "bProcessing": true,
            "iDisplayLength": 10,
            "bPaginate": true,
            "bSort": false,
            "sPaginationType": "full_numbers",
            "order": [[3, "desc"]]
        });
        $('[data-toggle="tooltip"]').tooltip();
        $("#btnNew").click(function () {
            window.location.href = "/Clinic/Voucher/add";
        });
        //DisableButton();
        var favorite = [];
        //Fromdate: $('#txtFromDate').val(), ToDate: $('#txtToDate').val(), VoucherStatus: $('#txtUserId').val(), UserID: $('#Assignedto').val(), LoginName: $('#txtLoginName').val()
        //$('#btnSearch').click(function () {

        //    $.ajax({
        //        type: "get",
        //        url: '/Admin/Voucher/GetSearchlist',
        //        contentType: "application/html; charset=utf-8",
        //        data: ({ id:2 }),
        //        datatype: "json",
        //        success: function (data) {
        //            $.getJSON("/Voucher/GetSearchlist"),
        //            $('#PartialView').load(data);
        //            alert("ok");
        //        },
        //        error: function () {
        //        }
        //    });
        //});

    });
</script>







