@model List<MyOnlineClinic.Web.Models.VoucherViewModel>
@{
    ViewBag.Title = "VoucherAssign";
    Layout = "~/Areas/Organizations/Views/Shared/_OrganizationLayout.cshtml";
}
<section class="content-header" style="margin-top:45px;">
    <h1 class="underline35">
        Vouchers List
    </h1>
    <ol class="breadcrumb">
        <li style="margin-right: 5px !important;"><button type="button" class="btn btn-success new">Back</button></li>
    </ol>
</section>
@using JQueryUIHelpers;
<div id="msg"></div>   
        @{MyOnlineClinic.Web.Models.SearchParametersViewModel objSearchModel = new MyOnlineClinic.Web.Models.SearchParametersViewModel();
        objSearchModel.FromDate = null;
        objSearchModel.ToDate = null;
        objSearchModel.UsedId = null;
        }
        @Html.Partial("_PartialVoucherList", objSearchModel)   
    <div class="container-fulid">
        <div class="row">
            <div class="col-md-12 eight_layer">
                <div class="table-responsive data">
                    <table id="mytable" class="table table-hover table-bordered">
                        <thead style="color:#fff;">
                            <tr>
                                <th class="top">No.</th>
                                <th class="top">Voucher No.</th>
                                <th class="top">Generated By</th>
                                <th class="top">Generated Date</th>
                                <th class="top">Voucher Status</th>
                                <th class="top">Assign Voucher(Patient)</th>
                                <th class="top">Assign Voucher(Doctor)</th>
                                <th class="top">Assign Date</th>
                            </tr>
                        </thead>
                        <tbody>

                            @{ int count = 1;}
                            @foreach (var item in Model)
                            {
                                <tr class="info">
                                    <td style="vertical-align:middle;">

                                        @count
                                    </td>
                                    <td style="vertical-align:middle;">@item.VoucherNo</td>
                                    <td style="vertical-align:middle;">@item.LoginName</td>
                                    <td style="vertical-align:middle;">@item.CreatedTimeZoneDisplayName<br />@item.CreatedDateInString</td>
                                    <td style="vertical-align:middle;">
                                        @item.voucherstatus
                                        @*@if (item.Status == 0)
                                            {
                                                <span>Not Used</span>
                                            }
                                            else
                                            {
                                                <span>Used</span>
                                            }*@
                                    </td>
                                    <td style="vertical-align:middle;">
                                        @if (item.RoleType == 3)
                                        {
                                            <a href="#"><span>@item.UserName</span></a>
                                        }

                                        else if (item.RoleType != 2)
                                        {
                                            <a class="successbutton" href="/admin/Patient/Findpatient/@item.VoucherID" data-toggle="tooltip" data-placement="left">
                                                <button class="button" style="vertical-align:middle"><span>Assign Voucher</span></button>
                                            </a>

                                        }
                                    </td>
                                    <td style="vertical-align:middle;">
                                        @if (item.RoleType == 2)
                                        {

                                            <a href="#"><span>@item.UserName</span></a>

                                        }
                                        else if (item.RoleType != 3)
                                        {
                                            <a class="successbutton" href="/admin/Doctor/DoctorList/@item.VoucherID" data-toggle="tooltip" data-placement="left">

                                                <button class="button" style="vertical-align:middle"><span>Assign Voucher</span></button>

                                            </a>
                                        }
                                    </td>
                                    <td style="vertical-align:middle;">
                                        @item.AssignedTimeZoneDisplayName<br />@item.AssignedDateInString
                                    </td>
                                </tr>
                                        count = count + 1;
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <br />
        <br />
        <br />
    </div>

<script src="~/AdminAssets/js/datatables/js/jquery.dataTables.js"></script>
<script>
    $(document).ready(function () {
        if ('@ViewBag.Errormessage' != '') {
            $('#FromDate').datepick({ dateFormat: 'dd/mm/yyyy' });
            $("#msg").append("<div class='alert alert-danger'><p>" + '@ViewBag.Errormessage' + "</p></div>").delaye(5000).fade();
        }
        var oTable = $('#example').dataTable({
            "bProcessing": true,
            "iDisplayLength": 10,
            "bPaginate": true,
            "bSort": false,
            "sPaginationType": "full_numbers",
            "order": [[3, "desc"]]
        });
        $('[data-toggle="tooltip"]').tooltip();
        $("#btnNew").click(function () {
            window.location.href = "/Organizations/Voucher/add";
        });
        //DisableButton();
        var favorite = [];
        //Fromdate: $('#txtFromDate').val(), ToDate: $('#txtToDate').val(), VoucherStatus: $('#txtUserId').val(), UserID: $('#Assignedto').val(), LoginName: $('#txtLoginName').val()
        //$('#btnSearch').click(function () {

        //    $.ajax({
        //        type: "get",
        //        url: '/Admin/Voucher/GetSearchlist',
        //        contentType: "application/html; charset=utf-8",
        //        data: ({ id:2 }),
        //        datatype: "json",
        //        success: function (data) {
        //            $.getJSON("/Voucher/GetSearchlist"),
        //            $('#PartialView').load(data);
        //            alert("ok");
        //        },
        //        error: function () {
        //        }
        //    });
        //});

    });
</script>

